# 1.iterable ê°ì²´

- ë°°ì—´ì„ ì¼ë°˜í™”í•œ ê°ì²´, ì–´ë–¤ ê°ì²´ë“  for .. of ë°˜ë³µë¬¸ì„ ì ìš© ê°€ëŠ¥(ë°°ì—´, ë¬¸ìì—´)
- ë°°ì—´ì´ ì•„ë‹Œ ê°ì²´ì— `Symbol.iterator` ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ë©´ ì´í„°ëŸ¬ë¸” ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ

- ìœ ì‚¬ë°°ì—´ê³¼ ì´í„°ëŸ¬ë¸”ì˜ ì°¨ì´
  - ìœ ì‚¬ë°°ì—´ : `ì¸ë±ìŠ¤, length í”„ë¡œí¼í‹°`ê°€ ìˆì–´ì„œ ë°°ì—´ì²˜ëŸ¼ ë³´ì´ëŠ” ê°ì²´
  - ì´í„°ëŸ¬ë¸” : `Symbol.iterator`ê°€ êµ¬í˜„ëœ ê°ì²´, `push,pop`ë“±ì˜ ë©”ì„œë“œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ

* ë™ì‘ ë°©ì‹
  1.  `for..of` ê°€ ì‹œì‘ë˜ë©´ `Symbol.iterator` ë¥¼ í˜¸ì¶œ(ì—†ìœ¼ë©´ ì—ëŸ¬)
  2.  `Symbol.iterator`ëŠ” ì´í„°ë ˆì´í„°(nextê°€ ìˆëŠ” ê°ì²´)ë¥¼ ë°˜í™˜í•˜ê³ 
  3.  `for..o`fëŠ” ì´í„°ë ˆì´í„°ë§Œì„ ëŒ€ìƒìœ¼ë¡œ ë™ì‘ í›„ ë‹¤ìŒ ê°’ì„ ì½ê¸° ìœ„í•´ `next()` ë©”ì„œë“œ í˜¸ì¶œ
  4.  `next()`ì˜ ë°˜í™˜ ê°’ì€ `{ done : Boolean, value : any }` ì˜ í˜•íƒœ (
  5.  `done = true` ì¼ ë–„ ë°˜ë³µ ì¢…ë£Œ

```
let range = {
  from: 1,
  to: 5,

  [Symbol.iterator]() {
    this.current = this.from;
    return this;
  },

  next() {
    if (this.current <= this.to) {
      return { done: false, value: this.current++ };
    } else {
      return { done: true };
    }
  }
};

for (let num of range) {
  // 1, then 2, 3, 4, 5
  alert(num);
}
```

## 1-1 ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬(Seperation of concern)

- for..of ë°˜ë³µë¬¸ì„ í•˜ë‚˜ì˜ ê°ì²´ì— ë™ì‹œì— ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ,
  > ì´í„°ë ˆì´í„°(ê°ì²´ ìì‹ )ê°€ í•˜ë‚˜ë¿ì´ì–´ì„œ ë‘ ë°˜ë³µë¬¸ì´ ë°˜ë³µ ìƒíƒœë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸

```
let range = {
  from: 1,
  to: 5
};

range[Symbol.iterator] = function() {
  return {
    current: this.from,
    last: this.to,
    next() {
      if (this.current <= this.last) {
        return { done: false, value: this.current++ };
      } else {
        return { done: true };
      }
    }
  };
};
```

## 1-2 for..ofë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì´í„°ë ˆì´í„°ë¥¼ í˜¸ì¶œí•˜ê¸°

- ë°˜ë³µê³¼ì •ì˜ í†µì œê°€ forë¬¸ë³´ë‹¤ ì‰¬ì›€

```
let str = "Hello";

let iterator = str[Symbol.iterator]();---

while (true) {
  let result = iterator.next();
  if (result.done) break;
  // ê¸€ìê°€ í•˜ë‚˜ì”© ì¶œë ¥
  alert(result.value);
}
```

## 1-3 ì´í„°ëŸ¬ë¸”, ìœ ì‚¬ë°°ì—´ì„ ë°°ì—´ë¡œ ë³€í™˜í•˜ê¸°

- `Array.from(obj, [, mapFn, thisArg])` :

  > ì´í„°ëŸ¬ë¸”ì´ë‚˜ ìœ ì‚¬ë°°ì—´ì„ ë°›ì•„ ì§„ì§œ ë°°ì—´ì„ ë°˜í™˜(pop,pushê°€ ê°€ëŠ¥)

  > 2ë²ˆì§¸ ì¸ìë¡œ ë§¤í•‘í•¨ìˆ˜ ì ìš© ê°€ëŠ¥

---

# 2. Map

- í‚¤ê°€ ìˆëŠ” ë°ì´í„°ë¥¼ ì €ì¥, í‚¤ëŠ” ë‹¤ì–‘í•œ ìë£Œí˜•ì„ í—ˆìš©
- ë§µì€ ê°ì²´ì™€ ë‹¬ë¦¬ í‚¤ë¥¼ ë¬¸ìí˜•ìœ¼ë¡œ ë³€í™˜í•˜ì§€ ì•ŠìŒ
- í‚¤ì—” ìë£Œí˜• ì œì•½ì´ ì—†ìŒ
- í‚¤ë¡œ ê°ì²´ë¥¼ í—ˆìš©í•˜ë©° ì‚½ì…ìˆœì„œë¥¼ ê¸°ì–µ

## 2-1 Map ìƒì„± ë°©ë²•

- `new Map() `
- í‚¤-ê°’ ìŒì¸ ë°°ì—´ì´ë‚˜ ì´í„°ëŸ¬ë¸” ê°ì²´ë¥¼ ì´ˆê¸°í™” ìš©ë„ë¡œ ë§µì— ì „ë‹¬í•´ ìƒˆë¡œìš´ ë§µì„ ë§Œë“¤ ìˆ˜ ìˆìŒ

```
let map = new Map([
  ['1',  'str1'],
  [1,    'num1'],
  [true, 'bool1']
]);
```

## 2-2 Map ë©”ì„œë“œ

- `map.set(key, value)` :

  > keyë¥¼ ì´ìš©í•´ valueë¥¼ ì €ì¥

- `map.get(key)` :

  > keyì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ë°˜í™˜
  > keyê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ undefinedë¥¼ ë°˜í™˜

- `map.has(key)` :

  > keyê°€ ì¡´ì¬í•˜ë©´ true, ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ falseë¥¼ ë°˜í™˜

- `map.delete(key)` :

  > keyì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì‚­ì œ

- `map.clear()` :

  > ë§µ ì•ˆì˜ ëª¨ë“  ìš”ì†Œë¥¼ ì œê±°

- `map.size` :
  > ìš”ì†Œì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜

### ë°˜ë³µ ë©”ì„œë“œ

- `map.keys()` :

  > ê° ìš”ì†Œì˜ í‚¤ë¥¼ ëª¨ì€ ë°˜ë³µ ê°€ëŠ¥í•œ(iterable, ì´í„°ëŸ¬ë¸”) ê°ì²´ë¥¼ ë°˜í™˜

- `map.values()` :

  > ê° ìš”ì†Œì˜ ê°’ì„ ëª¨ì€ ì´í„°ëŸ¬ë¸” ê°ì²´ë¥¼ ë°˜í™˜

- `map.entries()` :

  > ìš”ì†Œì˜ `í‚¤, ê°’`ì„ í•œ ìŒìœ¼ë¡œ í•˜ëŠ” ì´í„°ëŸ¬ë¸” ê°ì²´ë¥¼ ë°˜í™˜ (= for ( let entry of Map ) )

- Mapì€ forEachë¥¼ ì§€ì›

```
map.forEach( (value, key, map) => {
  ...
});
```

### ê°ì²´ë¥¼ Mapìœ¼ë¡œ ë³€í™˜

- `Object.entries(obj)` : ê°ì²´ì˜ í‚¤-ê°’ ìŒì„ ìš”ì†Œ([key, value])ë¡œ ê°€ì§€ëŠ” ë°°ì—´ì„ ë°˜í™˜

```
let obj = {
  name: "John",
  age: 30
};

let map = new Map(Object.entries(obj));

alert( map.get('name') ); // John
```

- `Object.fromEntries( [ [key,value], ... ])` : ë°°ì—´ì„ ê°ì²´ë¡œ ë°”ê¿ˆ

## 2-3 Mapì„ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•˜ëŠ” ë²•

- `map[key] = 2`ë¡œ ê°’ì„ ì„¤ì •í•˜ëŠ” ê²ƒ ê°™ì´` map[key]`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

  > ë§µì€ ê°ì²´ì™€ ë‹¤ë¦„, `map[key]`ëŠ” Mapì„ ì“°ëŠ” ë°”ë¥¸ ë°©ë²•ì´ ì•„ë‹˜

  > ì´ ë°©ë²•ì€ mapì„ ì¼ë°˜ ê°ì²´ì²˜ëŸ¼ ì·¨ê¸‰í•˜ì—¬ ì—¬ëŸ¬ ì œì•½ì´ ë°œìƒ

- map ì „ìš© ë©”ì„œë“œ set, get ë“±ì„ ì‚¬ìš©í•´ì•¼ë§Œ í•¨

## 2-4 ë§µì´ í‚¤ë¥¼ ë¹„êµí•˜ëŠ” ë°©ì‹

- `SameValueZero` ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ ê°’ì˜ ë“±ê°€ ì—¬ë¶€ë¥¼ í™•ì¸

  > ì´ ì•Œê³ ë¦¬ì¦˜ì€ ì¼ì¹˜ ì—°ì‚°ì `===`ì™€ ê±°ì˜ ìœ ì‚¬í•˜ì§€ë§Œ

  > NaNê³¼ NaNì„ ê°™ë‹¤ê³  ì·¨ê¸‰í•˜ëŠ” ê²ƒì—ì„œ ì¼ì¹˜ ì—°ì‚°ìì™€ ì°¨ì´ê°€ ìˆìŒ

  > ë”°ë¼ì„œ ë§µì—ì„  NaNë„ í‚¤ë¡œ ì“¸ ìˆ˜ ìˆìŒ

  > ì´ ì•Œê³ ë¦¬ì¦˜ì€ ìˆ˜ì •í•˜ê±°ë‚˜ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥

## 2-5 ì²´ì´ë‹

- `map.set`ì„ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë§µ ìì‹ ì´ ë°˜í™˜
  > ì´ë¥¼ ì´ìš©í•˜ë©´ `map.set`ì„ ì²´ì´ë‹ ê°€ëŠ¥

```
map.set('1', 'str1')
  .set(1, 'num1')
  .set(true, 'bool1');
```

---

# 3. Set

- ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ê°’ì„ ëª¨ì€ ì»¬ë ‰ì…˜(í‚¤ê°€ ì—†ìŒ)

## 3-1 ë©”ì„œë“œ

- `new Set(iterable)` :

  > ì´í„°ëŸ¬ë¸” ê°ì²´ë¥¼ ì „ë‹¬ë°›ìœ¼ë©´ ê·¸ ì•ˆì˜ ê°’ì„ ë³µì‚¬í•´ Set ìƒì„±

- `set.add(value)` :

  > ê°’ì„ ì¶”ê°€í•˜ê³  ìì‹ ì„ ë°˜í™˜

- `set.delete(value)` :

  > ê°’ì„ ì œê±°
  > í˜¸ì¶œ ì‹œì ì— ì…‹ ë‚´ì— ê°’ì´ ìˆì–´ì„œ ì œê±°ì— ì„±ê³µí•˜ë©´ true, ì•„ë‹ˆë©´ falseë¥¼ ë°˜í™˜

- `set.has(value)` :

  > ì…‹ ë‚´ì— ê°’ì´ ì¡´ì¬í•˜ë©´ true, ì•„ë‹ˆë©´ falseë¥¼ ë°˜í™˜

- `set.clear()` :

  > ì…‹ì„ ë¹„ì›€

- `set.size` :

  > ì…‹ì— ëª‡ ê°œì˜ ê°’ì´ ìˆëŠ”ì§€ ì…ˆ

- for..of / forEachë¥¼ ì§€ì›

```
set.forEach((value, valueAgain, set) => {
  ...
});

// 3ê°œì˜ ì¸ìˆ˜ë¥¼ ë°›ìŒ(valueë¥¼ 2ë²ˆ ë°›ìŒ)
// mapê³¼ì˜ í˜¸í™˜ì„±ì„ ìœ„í•¨(valueë¥¼ key/valueë¡œ ë°›ì„ ëª©ì )
```

### ë°˜ë³µ ë©”ì„œë“œ

- `set.keys()` :

  > ì…‹ ë‚´ì˜ ëª¨ë“  ê°’ì„ í¬í•¨í•˜ëŠ” ì´í„°ëŸ¬ë¸” ê°ì²´ë¥¼ ë°˜í™˜

- `set.values()` :

  > `set.keys`ì™€ ë™ì¼í•œ ì‘ì—… (ë§µê³¼ì˜ í˜¸í™˜ì„±)

- `set.entries()` :
  > ì…‹ ë‚´ì˜ `[value, value]` ë°°ì—´ì„ í¬í•¨í•˜ëŠ” ì´í„°ëŸ¬ë¸” ê°ì²´ë¥¼ ë°˜í™˜ (ë§µê³¼ì˜ í˜¸í™˜ì„±)

## 3-2 ë°°ì—´ì˜ ì¤‘ë³µ ìš”ì†Œ ì œê±° ë°©ë²•

```
function unique(arr) {
  return Array.from(new Set(arr));
}
```

---

# 4. ìœ„í¬ë§µ

- ê°€ë¹„ì§€ ì»¬ë ‰í„°ëŠ” ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ìš”ì†Œë¥¼ ì‚­ì œ

  > ìë£Œêµ¬ì¡°ë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†Œë„ ìì‹ ì´ ì†í•œ ìë£Œêµ¬ì¡°ê°€ ë©”ëª¨ë¦¬ì— ë‚¨ì•„ìˆëŠ” ë™ì•ˆ

  > ëŒ€ê°œ ë„ë‹¬ ê°€ëŠ¥í•œ ê°’ìœ¼ë¡œ ì·¨ê¸‰ë˜ì–´ ë©”ëª¨ë¦¬ì—ì„œ ì‚­ì œë˜ì§€ ì•ŠìŒ

```
let john = { name: "John" };
let array = [ john ];
// ì°¸ì¡°ë¥¼ nullë¡œ ë®ì–´ì”€
john = null;
alert(JSON.stringify(array[0]));

// johnì„ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ëŠ” ë°°ì—´ì˜ ìš”ì†Œì´ê¸° ë•Œë¬¸ì— ê°€ë¹„ì§€ ì»¬ë ‰í„°ì˜ ëŒ€ìƒì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
// array[0]ì„ ì´ìš©í•˜ë©´ í•´ë‹¹ ê°ì²´ë¥¼ ì–»ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
```

- ìœ„í¬ë§µ/ì…‹ì„ ì‚¬ìš©í•˜ë©´ í‚¤ë¡œ ì“°ì¸ ê°ì²´ê°€ ê°€ë¹„ì§€ ì»¬ë ‰í„°ì˜ ëŒ€ìƒì´ ë¨!
  > ë‹¨ ìœ„í¬ë§µì˜ í‚¤ëŠ” ë°˜ë“œì‹œ ê°ì²´

```
let john = { name: "John" };
let weakMap = new WeakMap();
weakMap.set(john, "...");
// ì°¸ì¡°ë¥¼ ë®ì–´ì”€
john = null;

// johnì„ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ëŠ” ì´ì œ ë©”ëª¨ë¦¬ì—ì„œ ì§€ì›Œì§‘ë‹ˆë‹¤!
```

- ìœ„í¬ë§µì€ ë°˜ë³µ ì‘ì—…ê³¼ `keys(), values(), entries()` ë©”ì„œë“œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ
  > ê°€ë¹„ì§€ ì»¬ë ‰í„°ì˜ ë™ì‘ ì‹œì ì„ ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ìœ„í¬ë§µì— ìš”ì†Œê°€ ëª‡ ê°œ ìˆëŠ”ì§€ íŒŒì•…í•  ìˆ˜ ì—†ìŒ

## 4-1 ìœ„í¬ë§µ ë©”ì„œë“œ

- `weakMap.get(key)`
- `weakMap.set(key, value)`
- `weakMap.delete(key)`
- `weakMap.has(key)`

## 4-2 ìœ„í¬ë§µ ìœ ìŠ¤ì¼€ì´ìŠ¤

- ë°©ë¬¸ì ë³„ ë°©ë¬¸ íšŸìˆ˜ :

  > ë°©ë¬¸ìê°€ ì‚¬ë§í•˜ë©´ ë°©ë¬¸ íšŸ ìˆ˜ë¥¼ ì…€ í•„ìš”ê°€ ì—†ì–´ì§

  > ìœ„í¬ë§µì„ í†µí•´ keyë¥¼ ê°€ë¹„ì§€ ì»¬ë ‰í„°ì˜ ëŒ€ìƒìœ¼ë¡œ ì„¤ì •

```
// ìœ„í¬ë§µì— ì‚¬ìš©ìì˜ ë°©ë¬¸ íšŸìˆ˜ë¥¼ ì €ì¥í•¨
let visitsCountMap = new WeakMap();

function countUser(user) {
  let count = visitsCountMap.get(user) || 0;
  visitsCountMap.set(user, count + 1);
}
```

- ìºì‹± :

```
ğŸ“ cache.js
let cache = new WeakMap();

function process(obj) {
  if (!cache.has(obj)) {
    let result = /* ì—°ì‚° ìˆ˜í–‰ */ obj;
    cache.set(obj, result);
  }
  return cache.get(obj);
}

ğŸ“ main.js
let obj = {/* ... ê°ì²´ ... */};
let result1 = process(obj);
let result2 = process(obj);

// ê°ì²´ê°€ ì“¸ëª¨ì—†ì–´ì§€ë©´ ì•„ë˜ì™€ ê°™ì´ nullë¡œ ë®ì–´ì”ë‹ˆë‹¤.
obj = null;

// ì´ ì˜ˆì‹œì—ì„  ë§µì„ ì‚¬ìš©í•œ ì˜ˆì‹œì²˜ëŸ¼ cache.sizeë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
// í•˜ì§€ë§Œ objê°€ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì´ ë˜ë¯€ë¡œ, ìºì‹±ëœ ë°ì´í„° ì—­ì‹œ ë©”ëª¨ë¦¬ì—ì„œ ì‚­ì œë  ê²ë‹ˆë‹¤.
// ì‚­ì œê°€ ì§„í–‰ë˜ë©´ cacheì—” ê·¸ ì–´ë–¤ ìš”ì†Œë„ ë‚¨ì•„ìˆì§€ ì•Šì„ê²ë‹ˆë‹¤.
```

---

# 5.ìœ„í¬ì…‹

- ì¶”ê°€ ë°ì´í„°(ë°©ë¬¸ì—¬ë¶€ ë“±)ì„ ì €ì¥í•  ë•Œ ì‚¬ìš©

## 5-1 ìœ„í¬ì…‹ ë©”ì„œë“œ

- `WeakSet().add`
- `WeakSet().has`
- `WeakSet().delete`

- ê°ì²´ë¥¼ ì¶”ê°€/ì‚­ì œí•˜ê³  ê·¸ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ”ì§€ hasë¡œ íŒŒì•…í•˜ëŠ” ìš©ë„

## 5-2 ìœ„í¬ì…‹ ìœ ìŠ¤ì¼€ì´ìŠ¤

- ì½ì€ ë©”ì‹œì§€ë¥¼ ì €ì¥

```
let messages = [
  {text: "Hello", from: "John"},
  {text: "How goes?", from: "John"},
  {text: "See you soon", from: "Alice"}
];

let readMessages = new WeakSet();

// ë©”ì‹œì§€ ë‘ ê°œê°€ ì½ìŒ ìƒíƒœë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.
readMessages.add(messages[0]);
readMessages.add(messages[1]);
// readMessagesì—” ìš”ì†Œ ë‘ ê°œê°€ ì €ì¥ë©ë‹ˆë‹¤.

// ì²« ë²ˆì§¸ ë©”ì‹œì§€ë¥¼ ë‹¤ì‹œ ì½ì–´ë´…ì‹œë‹¤!
readMessages.add(messages[0]);
// readMessagesì—ëŠ” ìš”ì†Œ ë‘ ê°œê°€ ì—¬ì „íˆ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤(ì¤‘ë³µ ìš”ì†Œ ì—†ìŒ).

// "'message[0]'ì€ ì½ìŒ ìƒíƒœì¸ê°€ìš”?"ì— ëŒ€í•œ ë‹µë³€
// true
alert("message 0ì€ ì½ìŒ ìƒíƒœì¸ê°€ìš”?: " + readMessages.has(messages[0]));

messages.shift();
```

---
